# Data Annotations Attributes in EF 6 and EF Core
Data Annotations attributes are .NET attributes which can be applied on an entity class or properties to override default conventions in EF 6 and EF Core.

Data annotation attributes are included in the `System.ComponentModel.DataAnnotations` and `System.ComponentModel.DataAnnotations.Schema` namespaces in EF 6 as well as in EF Core. These attributes are not only used in Entity Framework but they can also be used with ASP.NET MVC or data controls.

These data annotation attributes work in the same way in EF 6 and EF Core and are valid in both.

**Note:** Data annotations only give you a subset of configuration options. ![Fluent API](https://www.entityframeworktutorial.net/code-first/fluent-api-in-code-first.aspx) provides a full set of configuration options available in Code-First.


## System.ComponentModel.DataAnnotations Attributes

| **Attributes**              | **Description**                                                        |
|-----------------------------|------------------------------------------------------------------------|
| Key                         | Can be applied to a property to specify a key property in an entity    |
|                             | and make the corresponding column a PrimaryKey column in the database. |
|-----------------------------|------------------------------------------------------------------------|
| Timestamp                   | Can be applied to a property to specify the data type of a             |
|                             | corresponding column in the database as *rowversion*.                  |
|-----------------------------|------------------------------------------------------------------------|
| ConcurrencyCheck            | Can be applied to a property to specify that the corresponding         |
|                             | column should be included in the optimistic concurrency check.         |
|-----------------------------|------------------------------------------------------------------------|
| Required                    | Can be applied to a property to specify that the corresponding column  |
|                             | is a NotNull column in the database.                                   |
|-----------------------------|------------------------------------------------------------------------|
| MinLength                   | Can be applied to a property to specify the minimum string length      | 
|                             | allowed in the corresponding column in the database.                   |
|-----------------------------|------------------------------------------------------------------------|
| MaxLength                   | Can be applied to a property to specify the maximum string length      |
|                             | allowed in the corresponding column in the database.                   |
|-----------------------------|------------------------------------------------------------------------|
| StringLength                | Can be applied to a property to specify the maximum string length      |
|                             | allowed in the corresponding column in the database.                   |
|-----------------------------|------------------------------------------------------------------------|


## System.ComponentModel.DataAnnotations.Schema Attributes

| **Attributes**              | **Description**                                                        |
|-----------------------------|------------------------------------------------------------------------|
| Table                       | Can be applied to an entity class to configure the corresponding table |
|                             | name and schema in the database.                                       |
|-----------------------------|------------------------------------------------------------------------|
| Column                      | Can be applied to a property to configure the corresponding column     |
|                             | name, order and data type in the database.                             |
|-----------------------------|------------------------------------------------------------------------|
| Index                       | Can be applied to a property to configure that the corresponding       |
|                             | column should have an Index in the database. (EF 6.1 onwards only)     |
|-----------------------------|------------------------------------------------------------------------|
| ForeignKey                  | Can be applied to a property to mark it as a foreign key property.     |
|-----------------------------|------------------------------------------------------------------------|
| NotMapped                   | Can be applied to a property or entity class which should be excluded  |
|                             | from the model and should not generate a corresponding column or table |
|                             | in the database.                                                       |
|-----------------------------|------------------------------------------------------------------------|
| DatabaseGenerated           | Can be applied to a property to configure how the underlying database  |
|                             | should generate the value for the corresponding column e.g. identity,  |
|                             | computed or none.                                                      |
|-----------------------------|------------------------------------------------------------------------|
| InverseProperty             | Can be applied to a property to specify the inverse of a navigation    | 
|                             | property that represents the other end of the same relationship.       |
|-----------------------------|------------------------------------------------------------------------|
| ComplexType                 | Marks the class as complex type in EF 6. EF Core 2.0 does not support  |
|                             | this attribute.                                                        |
|-----------------------------|------------------------------------------------------------------------|


## Table Attribute in EF 6 & EF Core
The Table attribute can be applied to a class to configure the corresponding table name in the database. It overrides the default convention in EF 6 and EF Core. As per the default conventions, EF 6 creates a table name matching with `<DbSet<TEntity> property name> + 's' (or 'es')` in a context class and EF Core creates the Db column with the same name as `DbSet<TEntity>` property name.

Table Attribute: `[Table(string name, Properties:[Schema = string])`

* name: Name of the Db table.
* Schema: Name of the Db Schema in which a specified table should be created. (Optional)

```cs
using System.ComponentModel.DataAnnotations.Schema;

[Table("StudentMaster")]
public class Student
{
    public int StudentID { get; set; }
    public string StudentName { get; set; }
}
```

In the above example, the Table attribute is applied to the `Student` entity class. So, EF will override the default conventions and create the `StudentMaster` table instead of the `Students` table in the database, as shown below:

![pic](https://www.entityframeworktutorial.net/images/codefirst/table-attribute.png)

Use the `Schema` property to specify the schema name for a Db table as shown below.

```cs
using System.ComponentModel.DataAnnotations.Schema;

[Table("StudentMaster", Schema="Admin")]
public class Student
{
    public int StudentID { get; set; }
    public string StudentName { get; set; }
}
```

EF will create the `StudentMaster` table in the `Admin` schema as shown below:

![pic](https://www.entityframeworktutorial.net/images/codefirst/table-attribute-2.png)


## Column Attribute in EF 6 & EF Core
The Column attribute can be applied to one or more properties in an entity class to configure the corresponding column name, data type and order in a database table. The Column attribute overrides the default convention. As per the default conventions in EF 6 and EF Core, it creates a column in a db table with the same name and order as the property names.

Column Attribute: `[Column (string name, Properties:[Order = int],[TypeName = string])`
* **name:** Name of a column in a db table.
* **Order:** Order of a column, starting with zero index. (Optional)
* **TypeName:** Data type of a column. (Optional)

The following example changes the name of a column.

```cs
using System.ComponentModel.DataAnnotations.Schema;

public class Student
{
    public int StudentID { get; set; }
     
    [Column("Name")]
    public string StudentName { get; set; }
    public DateTime? DateOfBirth { get; set; }
    public byte[] Photo { get; set; }
    public decimal Height { get; set; }
    public float Weight { get; set; }
}
```

In the above example, the Column attribute is applied to a `StudentName` property. So, EF will override the default conventions and create a `Name` column instead of the `StudentName` column in the `Students` table as shown below:

![pic](https://www.entityframeworktutorial.net/images/efcore/column-attribute1.png)


## Column Data Type
Use the `TypeName` parameter in the column attribute to change the appropriate data type of the corresponding db column, as shown below:

```cs
using System.ComponentModel.DataAnnotations.Schema;

public class Student
{
    public int StudentID { get; set; }
    
    [Column("Name")]
    public string StudentName { get; set; }
    [Column("DoB", TypeName="DateTime2")]
    public DateTime DateOfBirth { get; set; }
    public byte[] Photo { get; set; }
    public decimal Height { get; set; }
    public float Weight { get; set; }
}
```

In the above example, `TypeName = "DateTime2"` parameter is applied on the `DateOfBirth` property. This will create a `DateTime2` type column instead of `DateTime` as shown below:

![pic](https://www.entityframeworktutorial.net/images/efcore/column-attribute2.png)


## Column Order
Use the zero-based `Order` parameter to set the order of columns in the database. As per the default convention, PK columns will come first and then the rest of the columns based on the order of their corresponding properties in an entity class.

**Note:** The Order parameter must be applied on all the properties with a different index, starting from zero.

```cs
using System.ComponentModel.DataAnnotations.Schema;

public class Student
{
    [Column(Order = 0)]
    public int StudentID { get; set; }
    
    [Column("Name", Order = 1)]
    public string StudentName { get; set; }
    
    [Column("DoB", Order = 5)]
    public DateTime DateOfBirth { get; set; }
    [Column(Order = 3)]
    public byte[] Photo { get; set; }
    [Column(Order = 2)]
    public decimal Height { get; set; }
    [Column(Order = 4)]
    public float Weight { get; set; }
}
```

The above example will create the columns in the specified order as shown below:

![pic](https://www.entityframeworktutorial.net/images/efcore/column-attribute3.png)


## Key Attribute in EF 6 & EF Core
The Key attribute can be applied to a property in an entity class to make it a key property and the corresponding column to a PrimaryKey column in the database. The default convention creates a primary key column for a property whose name is `Id` or `<Entity Class Name>Id`. The Key attribute overrides this default convention.

```cs
using System.ComponentModel.DataAnnotations;

public class Student
{
    [Key]
    public int StudentKey { get; set; }
    public string StudentName { get; set; }
}
```

As you can see in the above example, the `Key` attribute is applied to the `StudentKey` property of the `Student` entity class. This will override the default conventions and create a primary key column `StudentKey` in the `Students` table in the database as shown below:

![pic](https://www.entityframeworktutorial.net/images/codefirst/primary-key.png)

The Key attribute can be applied to a property of any primitive data type except unsigned integers.

**EF 6:**

In EF 6, the Key attribute along with the `Column` attribute can be applied to multiple properties of an entity class which will create composite primary key columns in the database.

EF Core does not support creating a composite key using the `Key` attribute. You have to use the Fluent API `HasKey()` function in EF Core.

```cs
using System.ComponentModel.DataAnnotations;

public class Student
{
    [Key]
    [Column(Order=1)]
    public int StudentKey { get; set; }
     
    [Key]
    [Column(Order=2)]
    public int AdmissionNum { get; set; }
     
    public string StudentName { get; set; }
}
```

The above code creates composite primary key columns `StudentKey` and `AdmissionNum` in the `Students` table as shown below:

![pic](https://www.entityframeworktutorial.net/images/codefirst/composite-key.png)